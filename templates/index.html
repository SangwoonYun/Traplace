<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>연맹 배치 시뮬레이터</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/grid.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/blocks.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}">
</head>
<body>
  <aside class="sidebar">
    <h2>사용 방법</h2>
    <div class="usage">
      • <b>드래그 앤 드롭</b>: 왼쪽 팔레트의 객체를 모눈에 배치 (그리드 스냅).<br/>
      • <b>중클릭 드래그</b>: 화면 이동(패닝).<br/>
      • <b>Ctrl/⌘ + 마우스 휠</b>: 확대/축소(감도 ½).<br/>
      • <b>트랙패드 핀치</b>: 확대/축소(감도 ½).<br/>
      • <b>셀 클릭</b>: 바닥 타일 빨간색 토글 칠하기.<br/>
      • <b>도시센터</b> 라벨: 더블클릭→텍스트 수정(Enter 저장 / Esc 취소).<br/>
      • 하단 <b>🗑 영역</b>: 객체를 드래그해 삭제.<br/>
      ※ 파란색 칠은 <b>연맹깃발(7×7)</b>, <b>평원본부(17×17)</b>가 생성.
    </div>

    <div class="palette-title">객체 팔레트</div>
    <div class="palette" id="palette">
      <div class="palette-item" data-kind="hq" data-size="3">
        <div class="pi-rot"></div>
        <span class="pi-text">평원본부</span>
      </div>
      <div class="palette-item" data-kind="flag" data-size="1">
        <div class="pi-rot"></div>
        <span class="pi-text">연맹깃발</span>
      </div>
      <div class="palette-item" data-kind="trap" data-size="3">
        <div class="pi-rot"></div>
        <span class="pi-text">사냥함정</span>
      </div>
      <div class="palette-item" data-kind="city" data-size="2">
        <div class="pi-rot"></div>
        <span class="pi-text">도시센터</span>
      </div>
      <div class="palette-item" data-kind="resource" data-size="2">
        <div class="pi-rot"></div>
        <span class="pi-text">연맹자원</span>
      </div>
      <div class="palette-item" data-kind="block" data-size="1">
        <div class="pi-rot"></div>
        <span class="pi-text">1×1</span>
      </div>
      <div class="palette-item" data-kind="block" data-size="2">
        <div class="pi-rot"></div>
        <span class="pi-text">2×2</span>
      </div>
      <div class="palette-item" data-kind="block" data-size="3">
        <div class="pi-rot"></div>
        <span class="pi-text">3×3</span>
      </div>
    </div>
    <div class="sidebar-footer">
      <a href="https://github.com/SangwoonYun/Traplace"
        target="_blank" rel="noopener" class="github-link" aria-label="Traplace GitHub">
        <picture>
          <!-- 다크 모드에서는 흰색 로고 -->
          <source srcset="{{ url_for('static', filename='img/github-mark-white.svg') }}"
                  media="(prefers-color-scheme: dark)">
          <!-- 라이트 모드 기본 -->
          <img class="github-icon"
              src="{{ url_for('static', filename='img/github-mark.svg') }}"
              alt="GitHub">
        </picture>
      </a>
      <span class="credit">Created by #135 [KOR] 방구석개발자</span>
    </div>
  </aside>

  <header class="toolbar" id="toolbar">
    <div class="tb-group">
      <button id="btnUndo" class="tb-btn" title="되돌리기 (⌘Z / Ctrl+Z)" aria-label="되돌리기">↶</button>
      <button id="btnRedo" class="tb-btn" title="다시하기 (⇧⌘Z 또는 Ctrl+Y)" aria-label="다시하기">↷</button>
    </div>
    <div class="tb-sep"></div>
    <div class="tb-group">
      <button id="btnReset" class="tb-btn danger" title="초기화 (⌥⌘R / Ctrl+Alt+R)" aria-label="초기화">🧹</button>
      <button id="btnCopyURL" class="tb-btn" title="URL 복사 (⌥⌘C / Ctrl+Alt+C)" aria-label="URL 복사">🔗</button>
      <button id="btnExportPNG" class="tb-btn primary" title="PNG 내보내기 (⌥⌘E / Ctrl+Alt+E)" aria-label="PNG 내보내기">🖼</button>
    </div>
  </header>

  <main class="viewport" id="viewport" aria-label="scrollable-viewport">
    <div class="world" id="world">
      <div class="rot" id="rot">
        <div class="grid"></div>
        <div class="tiles" id="tiles"></div>
        <div class="tiles-user" id="tilesUser"></div>
        <div class="tiles-preview" id="tilesPreview"></div>
        <div class="outlines" id="outlines"></div>
        <div class="outlines-preview" id="outlinesPreview"></div>
        <div class="snap-outline" id="snap"></div>
      </div>
      <div class="badge" id="badge">
        <button id="btnHome" class="home-btn" title="Home">🏠</button>
        <span id="badgeText">x:-, y:-, 100%</span>
      </div>
    </div>
  </main>

  <div class="trash-zone" id="trash">🗑 드래그하여 삭제</div>

  <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
