<!-- File: app/templates/index.html -->
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>Kingshot Traplace</title>

    <!-- Icons & Styles -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/grid.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/blocks.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}" />
  </head>

  <body>
    <!-- Sidebar: palette only (footer removed by convention) -->
    <div id="sidebar" class="sidebar">
      <!-- Hidden on mobile: usage block -->
      <h2 data-i18n="ui.usageTitle" data-mobile-hidden></h2>
      <div class="usage" data-i18n="ui.usage" data-mobile-hidden></div>

      <!-- Hidden on mobile: palette title -->
      <div class="palette-title" data-i18n="ui.paletteTitle" data-mobile-hidden></div>

      <!-- Mobile scroll buttons (outside palette) -->
      <button id="paletteScrollLeft" class="palette-scroll-btn palette-scroll-left mobile-only" aria-label="DÃ©filer Ã  gauche">â—€</button>
      <button id="paletteScrollRight" class="palette-scroll-btn palette-scroll-right mobile-only" aria-label="DÃ©filer Ã  droite">â–¶</button>

      <!-- Palette -->
      <div
        id="palette"
        class="palette palette--scroll"
        role="listbox"
        tabindex="0"
        aria-label="Palette"
      >
        <div
          class="palette-item"
          data-kind="hq"
          data-size="3"
          role="button"
          tabindex="0"
          aria-label="Quartier gÃ©nÃ©ral"
        >
          <div class="pi-rot"></div>
          <span class="pi-text"></span>
        </div>

        <div
          class="palette-item"
          data-kind="flag"
          data-size="1"
          role="button"
          tabindex="0"
          aria-label="Drapeau d'alliance"
        >
          <div class="pi-rot"></div>
          <span class="pi-text"></span>
        </div>

        <div
          class="palette-item"
          data-kind="trap"
          data-size="3"
          role="button"
          tabindex="0"
          aria-label="PiÃ¨ge de chasse"
        >
          <div class="pi-rot"></div>
          <span class="pi-text"></span>
        </div>

        <div
          class="palette-item"
          data-kind="city"
          data-size="2"
          role="button"
          tabindex="0"
          aria-label="Ville"
        >
          <div class="pi-rot"></div>
          <span class="pi-text"></span>
        </div>

        <div
          class="palette-item"
          data-kind="resource"
          data-size="2"
          role="button"
          tabindex="0"
          aria-label="Ressource d'alliance"
        >
          <div class="pi-rot"></div>
          <span class="pi-text"></span>
        </div>

        <div
          class="palette-item"
          data-kind="block"
          data-size="1"
          role="button"
          tabindex="0"
          aria-label="Bloc 1Ã—1"
        >
          <div class="pi-rot"></div>
          <span class="pi-text">1Ã—1</span>
        </div>

        <div
          class="palette-item"
          data-kind="block"
          data-size="2"
          role="button"
          tabindex="0"
          aria-label="Bloc 2Ã—2"
        >
          <div class="pi-rot"></div>
          <span class="pi-text">2Ã—2</span>
        </div>

        <div
          class="palette-item"
          data-kind="block"
          data-size="3"
          role="button"
          tabindex="0"
          aria-label="Bloc 3Ã—3"
        >
          <div class="pi-rot"></div>
          <span class="pi-text">3Ã—3</span>
        </div>

        <div
          class="palette-item"
          data-kind="block"
          data-size="10"
          role="button"
          tabindex="0"
          aria-label="Bloc 10Ã—10"
        >
                    <div class="pi-rot"></div>
          <span class="pi-text">10Ã—10</span>
        </div>
                <div></div>
        <!-- Custom Block Controls (inside palette for mobile scroll) -->
        <div class="custom-block-controls">
          <div class="control-group">
            <label for="customSize" data-i18n="ui.customBlock.size">Taille personnalisÃ©e</label>
            <div class="size-input-group">
              <input type="number" id="customSize" min="1" max="50" value="5" />
              <button id="createCustomBlock" class="btn-create" data-i18n="ui.customBlock.create">CrÃ©er</button>
            </div>
          </div>
          
          <div class="control-group">
            <label data-i18n="ui.customBlock.color">Couleur</label>
            <div class="color-picker">
              <button class="color-btn" data-color="#e3f2fd" data-border="#1976d2" style="background: #e3f2fd; border-color: #1976d2;" title="Bleu"></button>
              <button class="color-btn" data-color="#e8f5e9" data-border="#388e3c" style="background: #e8f5e9; border-color: #388e3c;" title="Vert"></button>
              <button class="color-btn" data-color="#fff3e0" data-border="#f57c00" style="background: #fff3e0; border-color: #f57c00;" title="Orange"></button>
              <button class="color-btn" data-color="#f3e5f5" data-border="#7b1fa2" style="background: #f3e5f5; border-color: #7b1fa2;" title="Violet"></button>
              <button class="color-btn" data-color="#fce4ec" data-border="#c2185b" style="background: #fce4ec; border-color: #c2185b;" title="Rose"></button>
              <button class="color-btn" data-color="#e0f2f1" data-border="#00796b" style="background: #e0f2f1; border-color: #00796b;" title="Turquoise"></button>
              <button class="color-btn" data-color="#fff9c4" data-border="#f9a825" style="background: #fff9c4; border-color: #f9a825;" title="Jaune"></button>
              <button class="color-btn active" data-color="#fafafa" data-border="#555" style="background: #fafafa; border-color: #555;" title="Gris"></button>
            </div>
          </div>
        </div>
      </div>
      
    </div>

    <!-- Top toolbar -->
    <header id="toolbar" class="toolbar" role="toolbar" aria-label="Editor toolbar">
      <div class="tb-group">
        <button
          id="toggleSidebar"
          class="tb-btn"
          type="button"
          title="Replier/DÃ©plier la palette"
          aria-label="Toggle sidebar"
        >
          â—€
        </button>
      </div>

      <div class="tb-sep" aria-hidden="true"></div>

      <div class="tb-group">
        <button
          id="btnUndo"
          class="tb-btn"
          type="button"
          title="Annuler (âŒ˜Z / Ctrl+Z)"
          aria-label="Annuler"
        >
          â†¶
        </button>
        <button
          id="btnRedo"
          class="tb-btn"
          type="button"
          title="Refaire (â‡§âŒ˜Z ou Ctrl+Y)"
          aria-label="Refaire"
        >
          â†·
        </button>
      </div>

      <div class="tb-sep" aria-hidden="true"></div>

      <div class="tb-group">
        <button
          id="btnCityTrapDist"
          class="tb-btn"
          type="button"
          title="PrÃ©dire la distance au piÃ¨ge (âŒ¥âŒ˜D / Ctrl+Alt+D)"
          aria-label="PrÃ©dire la distance"
        >
          ğŸ“
        </button>
        <button
          id="btnReset"
          class="tb-btn danger"
          type="button"
          title="RÃ©initialiser (âŒ¥âŒ˜R / Ctrl+Alt+R)"
          aria-label="RÃ©initialiser"
        >
          ğŸ§¹
        </button>
        <button
          id="btnCopyURL"
          class="tb-btn"
          type="button"
          title="Copier l'URL (âŒ¥âŒ˜C / Ctrl+Alt+C)"
          aria-label="Copier l'URL"
        >
          ğŸ”—
        </button>
        <button
          id="btnExportPNG"
          class="tb-btn primary"
          type="button"
          title="Exporter en PNG (âŒ¥âŒ˜E / Ctrl+Alt+E)"
          aria-label="Exporter en PNG"
        >
          ğŸ–¼
        </button>
        <button
          id="toggleHints"
          class="tb-btn mobile-only"
          type="button"
          title="Afficher les conseils"
          aria-label="Afficher/masquer les conseils"
        >
          ğŸ’¡
        </button>
      </div>

      <div class="tb-flex-spacer" aria-hidden="true"></div>

      <div class="tb-group">
        <label class="lang-label" for="langSelect" data-i18n="ui.toolbar.lang"></label>
        <select id="langSelect" class="lang-select" aria-label="Language">
          <option value="fr" selected>ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
          <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
          <option value="zh-CN">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
          <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="pl">ğŸ‡µğŸ‡± Polski</option>
          <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
          <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
          <!-- <option value="ar" data-rtl>ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option> -->
          <option value="th">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</option>
          <option value="id">ğŸ‡®ğŸ‡© Indonesia</option>
        </select>
      </div>
    </header>

    <!-- Viewport / World -->
    <main id="viewport" class="viewport" aria-label="scrollable-viewport">
      <div id="world" class="world">
        <div id="rot" class="rot">
          <div class="grid"></div>
          <div id="tiles" class="tiles"></div>
          <div id="tilesUser" class="tiles-user"></div>
          <div id="tilesPreview" class="tiles-preview"></div>
          <div id="outlines" class="outlines"></div>
          <div id="outlinesPreview" class="outlines-preview"></div>
          <div id="snap" class="snap-outline"></div>
        </div>

        <div id="badge" class="badge">
          <button id="btnHome" class="home-btn" type="button" title="Home" aria-label="Home">
            ğŸ 
          </button>
          <span id="badgeText" aria-live="polite">x:-, y:-, 100%</span>
        </div>
      </div>
    </main>

    <!-- Trash zone for delete via drag -->
    <div
      id="trashZone"
      class="trash-zone"
      data-i18n-title="ui.trash.title"
      title="Glissez ici pour supprimer"
    >
      <span class="trash-emoji" aria-hidden="true">ğŸ—‘</span>
      <span class="trash-label" data-i18n="ui.trash.label"></span>
    </div>

    <noscript>Veuillez activer JavaScript pour utiliser cette application.</noscript>
    
    <!-- Hints Modal (Mobile) -->
    <div id="hintsModal" class="hints-modal">
      <div class="hints-modal-content">
        <button class="hints-modal-close" type="button" aria-label="Fermer">Ã—</button>
        <h2 data-i18n="ui.usageTitle">Mode d'emploi</h2>
        <div data-i18n="ui.usageMobile"></div>
      </div>
    </div>

    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
